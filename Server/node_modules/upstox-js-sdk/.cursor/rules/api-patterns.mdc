---
globs: src/api/*.js,test/api/*.js
---

# API Development Patterns

## Auto-Generated Code Warning

**CRITICAL**: All files in [src/api/](mdc:src/api/) and [src/model/](mdc:src/model/) are auto-generated by Swagger Codegen. 

- **DO NOT** manually edit these files
- Changes will be overwritten on next code generation
- Modifications should be made to the OpenAPI specification instead

## API Class Structure

Each API class follows this pattern:
```javascript
export class {Domain}Api {
    constructor(apiClient) {
        this.apiClient = apiClient || ApiClient.instance;
    }
    
    // Methods follow naming: {verb}{Resource}({params}, callback)
    // e.g., placeOrder(), getOrderBook(), cancelOrder()
}
```

## Authentication Pattern

All API calls use OAuth2 Bearer token authentication:
```javascript
let defaultClient = UpstoxClient.ApiClient.instance;
var OAUTH2 = defaultClient.authentications['OAUTH2'];
OAUTH2.accessToken = 'YOUR_ACCESS_TOKEN';
```

## Sandbox Mode

The SDK supports sandbox mode for testing:
```javascript
let sandboxClient = new UpstoxClient.ApiClient(true);
sandboxClient.authentications["OAUTH2"].accessToken = "SANDBOX_ACCESS_TOKEN";
```

## Error Handling Pattern

API methods use Node.js callback pattern:
```javascript
apiInstance.methodName(params, (error, data, response) => {
    if (error) {
        console.error(error.response.text);
    } else {
        console.log('Success:', data);
    }
});
```

## Request/Response Models

- Request models: `{Action}Request` (e.g., PlaceOrderRequest, ModifyOrderRequest)
- Response models: `Get{Resource}Response` (e.g., GetOrderBookResponse, GetTradeResponse)
- All models have enum properties for constrained values (e.g., OrderTypeEnum, TransactionTypeEnum)

## API Versioning

- V2 APIs: Default endpoints (e.g., OrderApi, MarketQuoteApi)
- V3 APIs: Newer versions with "V3" suffix (e.g., OrderControllerV3Api, MarketQuoteV3Api)
- Always prefer V3 APIs when available for new implementations